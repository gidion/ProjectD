#:kivy 1.0.9
#file name must end on the name of the app

WindowManager:
    Main_Model_Page:
    Create_model_page:
    Filechooser_Page:

<Main_Model_Page>:
    name: "Your model"
    sm : None 
    #temp image
    ImageButton:
        id: model_image
        source: "default.jpg"
        
        pos_hint: {"center_x": 0.5, "top": 1 }
        #           x   y
        size_hint: 0.80, 0.80
        on_release: root.Show_image_popup(self.source)

    #create/cam
    Button:
        id: 'Create'
        text: "Create Model"
        pos_hint: {"x":0.05, "y": 0.22}
        size_hint: 0.25, 0.08
        background_color: (250 / 255, 239 / 255, 239 / 255, 1)
        color: (235 / 255, 153 / 255, 153 / 255, 1)
        on_release: 
            root.sm.current =  "Create_model_page"
            #sm.transition.direction = "down"

    #Requirements
    Button:
        id: Requirements
        text: "Instructions"
        #on_release: root.btn()
        pos_hint: {"x":0.375, "y": 0.22}
        size_hint: 0.25, 0.08
        background_color: (250 / 255, 239 / 255, 239 / 255, 1)
        color: (235 / 255, 153 / 255, 153 / 255, 1)
        on_release: root.Show_requirements_popup()

    #Delete
    Button:
        id: Delete
        text: "Delete"
        on_release: root.Show_delete_popup()
        pos_hint: {"x":0.7, "y": 0.22}
        size_hint: 0.25, 0.08
        background_color: (250 / 255, 239 / 255, 239 / 255, 1)
        color: (235 / 255, 153 / 255, 153 / 255, 1)
    
<Delete_popup>:
    windw: None 
    Label:
        text: "Are you sure you want to \n delete your model?"
        size_hint: 0.6, 0.2
        pos_hint: {"x":0.2,"top": 1}
        background_color: (250 / 255, 239 / 255, 239 / 255, 1)
        color: (235 / 255, 153 / 255, 153 / 255, 1)
    Button:
        id: Del_button
        text: "Delete model"
        size_hint: 0.6, 0.2
        pos_hint: {"x": 0.2,"top": 0.3}
        on_release:
            root.sm.get_screen('Main_Model_Page').Delete_model()
            root.windw.dismiss()

<Requirements_popup>:
    windw: None 
    Label:
        id: req_text
        text: ""
        size_hint: 0.6, 0.35
        pos_hint: {"x":0.22,"top": 0.9}
        background_color: (250 / 255, 239 / 255, 239 / 255, 1)
        color: (235 / 255, 153 / 255, 153 / 255, 1)
    Button:
        id: Req_button
        text: "Ok"
        size_hint: 0.3, 0.2
        pos_hint: {"center_x": 0.5,"top": 0.3}
        on_release:
            root.windw.dismiss()

<Image_popup>:
    windw: None 
    
    Image:
        id: model_image
        source: "default.jpg"

        pos_hint: {"x": -3, "y": -3 }
        #           x   y
        size_hint: 7, 7
        background_color: (250 / 255, 239 / 255, 239 / 255, 1)

########
<Create_model_page>:
    name: "Create Model"
    sm: None 
       
    #temp image
    ImageButton:
        id: create_image
        pos_hint: {"top": 0.9, "x": 0.2}
        #           x   y
        size_hint: 0.6, 0.45
        source: "default.jpg"
        on_release: root.Show_image_popup(self.source)

    #Camera
    Button:
        id: Camera
        text: "Camera"
        #on_release: root.btn()
        pos_hint: {"x":0.1, "y": 0.2}
        size_hint: 0.25, 0.15
        background_color: (250 / 255, 239 / 255, 239 / 255, 1)
        color: (235 / 255, 153 / 255, 153 / 255, 1)
        on_release: 
            root.sm.current =  "Camera"
    #Done
    Button:
        id: Done
        text: "Create"
        on_release: 
            root.sm.current = "Main_Model_Page"
            #root.manager.transition.direction = "up"
            root.create_model()
        pos_hint: {"x":0.375, "y": 0.16}
        size_hint: 0.25, 0.15
        background_color: (250 / 255, 239 / 255, 239 / 255, 1)
        color: (235 / 255, 153 / 255, 153 / 255, 1)

     #process
    Button:
        id: Process
        text: "Convert/process"
        on_release: 
            #app.root.current = "Main_Model_Page"
            #root.manager.transition.direction = "up"
            root.process()
        pos_hint: {"x":0.375, "y": 0.31}
        size_hint: 0.25, 0.15
        background_color: (250 / 255, 239 / 255, 239 / 255, 1)
        color: (235 / 255, 153 / 255, 153 / 255, 1)


    #back
    Button:
        id: 'back'
        text: "Go back"
        pos_hint: {"x":0.375, "y": 0.01}
        size_hint: 0.25, 0.15
        background_color: (250 / 255, 239 / 255, 239 / 255, 1)
        color: (235 / 255, 153 / 255, 153 / 255, 1)
        on_release: 
            root.sm.current = "Main_Model_Page"
            #root.manager.transition.direction = "up"
    #Gallery
    Button:
        id: 'Gallery'
        text: "Gallery"
        on_release: 
            root.sm.current = "Filechooser_Page"
            #root.manager.transition.direction = "left"
        pos_hint: {"x":0.65, "y": 0.2}
        size_hint: 0.25, 0.15
        background_color: (250 / 255, 239 / 255, 239 / 255, 1)
        color: (235 / 255, 153 / 255, 153 / 255, 1)
#######   
#######
<Filechooser_Page>: 
    name: 'File Chooser' 
    sm: None
    FloatLayout:
        id: Filechooser
        # Providing the orentation 
        orientation: 'vertical'
     
        # Creating list view one side 
        FileChooserListView: 
            pos_hint: {'X': 0.8, 'y': 0.4}
            size_hint: 0.7, 0.6
            filters: ['*.png']        
            
            on_selection: 
                root.selected(self.selection) 
        # Creating Icon view other side 
        FileChooserIconView: 
            pos_hint: {'X': 0, 'y': 0.4}
            size_hint: 1, 0.6
            #try to change icon to small image
            canvas.before: 
                Color: 
                    rgb: .5, .4, .5
                Rectangle: 
                    pos: 0,  -1
                    size: self.size 
            dirselect: True
            on_selection: 
                #root.select(*args) 
                root.selected(self.selection) 
        Image:
            pos_hint: {'center_x': 0.5, 'center_y': 0.23}
            size_hint: 0.55, 0.55
            id: image_show
            source: "default.jpg"

        Button:
            id: 'Cancel'
            text: "Cancel"
            on_release:
                root.sm.current = "Create_model_page"
                #root.manager.transition.direction = "right"
            pos_hint: {"center_x":0.3, "center_y": 0.03}
            size_hint: 0.25, 0.05
            background_color: (250 / 255, 239 / 255, 239 / 255, 1)
            color: (235 / 255, 153 / 255, 153 / 255, 1)


        Button:
            id: 'Submit'
            text: "Submit"
            on_release: 
                root.sm.current = "Create_model_page"
                #root.manager.transition.direction = "right"
                root.submit()
            pos_hint: {"center_x":0.7, "center_y": 0.03}
            size_hint: 0.25, 0.05
            background_color: (250 / 255, 239 / 255, 239 / 255, 1)
            color: (235 / 255, 153 / 255, 153 / 255, 1)



            