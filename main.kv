#:kivy 1.0.9
#file name must end on the name of the app

WindowManager:
    Main_Model_Page:
    Create_model_page:
    Filechooser_Page:

<Main_Model_Page>:
    name: "Main_Model_Page"
    #background
    canvas:
        Color:
            rgba: 1, 0.9, 0.6, 1
        Rectangle:
            pos: self.pos
            size: self.size


    #temp nav bar
    Widget:
        canvas:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        pos_hint: {"top": 0.15, "x": 0}
            #           x   y
        size_hint: 1, 0.1

    #temp image
    Image:
        id: model_image
        source: root.img

        pos_hint: {"top": 0.97, "x": 0.2}
        #           x   y
        size_hint: 0.6, 0.45
        #on_release:
        #    test()        
    #create/cam
    Button:
        id: 'Create'
        text: "Create Model"
        pos_hint: {"x":0.05, "y": 0.33}
        size_hint: 0.25, 0.15
        background_color: 0.9, 0.8, 0.6, 1
        on_release: 
            app.root.current = "Create_model_page"
            root.manager.transition.direction = "down"

    #Edit
    Button:
        id: 'Edit'
        text: "Edit"
        #on_release: root.btn()
        pos_hint: {"x":0.375, "y": 0.2}
        size_hint: 0.25, 0.15
        background_color: 0.9, 0.7, 0, 1
    
    #Delete
    Button:
        id: 'Delete'
        text: "Delete"
        on_release: root.Show_delete_popup()
        pos_hint: {"x":0.7, "y": 0.33}
        size_hint: 0.25, 0.15
        background_color: 1, 0, 0, 1
#######
<Filechooser_Page>: 
    name: 'Filechooser_Page' 
    FloatLayout:
        id: Filechooser
        # Providing the orentation 
        orientation: 'vertical'
     
        # Creating list view one side 
        FileChooserListView: 
            pos_hint: {'X': 0.8, 'y': 0.4}
            size_hint: 0.7, 0.6
            filters: ['*.png']        
            
            on_selection: 
                root.selected(self.selection) 
        # Creating Icon view other side 
        FileChooserIconView: 
            pos_hint: {'X': 0, 'y': 0.4}
            size_hint: 1, 0.6
            #try to change icon to small image
            canvas.before: 
                Color: 
                    rgb: .5, .4, .5
                Rectangle: 
                    pos: 0,  -1
                    size: self.size 
            dirselect: True
            on_selection: 
                #root.select(*args) 
                root.selected(self.selection) 
        Image:
            pos_hint: {'X': 0.8, 'y': 0}
            size_hint: 0.4, 0.4
            id: image_show
            source: 'default.jpg'
            
        Button:
            id: 'Submit'
            text: "Submit"
            on_release: 
                app.root.current = "Create_model_page"
                root.manager.transition.direction = "right"
                root.submit()
            pos_hint: {"x":0.375, "y": 0.1}
            size_hint: 0.25, 0.15
            background_color: 0.9, 0.7, 0, 1
########
<Create_model_page>:
    name: "Create_model_page"
    #background
    canvas:
        Color:
            rgba: 0.1, 0.1, 0.1, 1
        Rectangle:
            pos: self.pos
            size: self.size
            
    #temp image
    Image:
        id: create_image
        pos_hint: {"top": 0.97, "x": 0.2}
        #           x   y
        size_hint: 0.6, 0.45
        source: 'default.jpg'
    #Camera
    Button:
        id: 'Camera'
        text: "Camera"
        #on_release: root.btn()
        pos_hint: {"x":0.1, "y": 0.2}
        size_hint: 0.25, 0.15
        background_color: 0.9, 0.8, 0.6, 1
    
    #Done
    Button:
        id: 'Done'
        text: "Create"
        on_release: 
            app.root.current = "Main_Model_Page"
            root.manager.transition.direction = "up"
            root.create_model()
        pos_hint: {"x":0.375, "y": 0.16}
        size_hint: 0.25, 0.15
        background_color: 0.9, 0.7, 0, 1

     #process
    Button:
        id: 'Process'
        text: "Convert/process"
        on_release: 
            #app.root.current = "Main_Model_Page"
            #root.manager.transition.direction = "up"
            root.process()
        pos_hint: {"x":0.375, "y": 0.3}
        size_hint: 0.25, 0.15
        background_color: 0.9, 0.7, 0, 1


    #back
    Button:
        id: 'back'
        text: "Go back"
        pos_hint: {"x":0.375, "y": 0.01}
        size_hint: 0.25, 0.15
        background_color: 0.05, 0.05, 0.05, 1
        on_release: 
            app.root.current = "Main_Model_Page"
            root.manager.transition.direction = "up"
    #Gallery
    Button:
        id: 'Gallery'
        text: "Gallery"
        on_release: 
            app.root.current = "Filechooser_Page"
            root.manager.transition.direction = "left"
        pos_hint: {"x":0.65, "y": 0.2}
        size_hint: 0.25, 0.15
        background_color: 1, 0, 0, 1
#######   
<Delete_popup>:
    Label:
        text: "Are you sure you want to delete your model?"
        size_hint: 0.6, 0.2
        pos_hint: {"x":0.2,"top": 1}
    Button:
        id: 'Del_button'
        text: "Delete model"
        size_hint: 0.6, 0.2
        pos_hint: {"x": 0.2,"top": 0.3}
        on_release:
            app.root.get_screen('Main_Model_Page').Delete_model()
            

